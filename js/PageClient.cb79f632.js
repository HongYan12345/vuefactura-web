import{P as z,z as T,S as F,r as V,t as L,u as q,a as k,c as I,B as M,o as R,e as j,C as K,E as G,G as Q,H as W,I as H,_ as J,f as r,g as p,h as b,j as v,k as t,w as i,l as P,q as E,J as X,v as Y,K as Z,m as x,M as $,L as ee,N as oe,O as te,p as U}from"./index.a1f9718e.js";const le={components:{PlusOutlined:z,DeleteOutlined:T,SearchOutlined:F},setup(){const l=V({errorClient:!1,valueClient:"",modifica_articulo:!1,articulo_name:""}),a=L(l),w=q(),o=k(!1),d=k([]),_=k(""),e=I(),C=k(!1),f=()=>{l.modifica_articulo=!0},m=()=>{if(o.value=!0,e.state.isVisitor)K(l.articulo_name).then(()=>{l.modifica_articulo=!1,o.value=!1,l.articulo_name=""});else{const n={name:l.articulo_name};j("articulos",l.articulo_name,n).then(()=>{l.modifica_articulo=!1,o.value=!1,l.articulo_name=""})}u()},S=()=>{d.value=[],e.state.isVisitor?W().then(n=>{console.log("[PageClient]articulo en base de dato:",n),n.forEach(h=>{d.value.push({value:h.name})})}):H("articulos").then(n=>{console.log("[PageClient]articulo en FireBase:",n),n.forEach(h=>{d.value.push({value:h.name})})}).catch(n=>{console.error("Error getting data: ",n)})},g=()=>{w.back()},y=n=>{G("articulos",n),Q(n),u()},A=M(()=>(console.log("s",_),_.value?d.value.filter(n=>n.value.includes(_.value)):d.value)),u=()=>{S()};return R(()=>{u()}),{...a,searchString:_,goBack:g,visible:C,delectArticulo:y,modificaArticulo:f,handleOkArticulo:m,confirmLoading:o,filteredArticulos:A}}},ae={class:"item-row"};function ne(l,a,w,o,d,_){const e=r("SearchOutlined"),C=r("a-input"),f=r("PlusOutlined"),m=r("a-button"),S=r("DeleteOutlined"),g=r("a-list-item"),y=r("a-list"),A=r("a-modal");return p(),b("div",null,[v("div",null,[t(C,{class:"search-input",placeholder:"Search",value:o.searchString,"onUpdate:value":a[0]||(a[0]=u=>o.searchString=u)},{suffix:i(()=>[t(e)]),_:1},8,["value"])]),v("div",null,[t(m,{onClick:o.modificaArticulo,class:"btn-add",type:"text",block:""},{icon:i(()=>[t(f,{style:{"font-size":"20px"}})]),_:1},8,["onClick"])]),v("div",null,[t(y,{class:"a-list","item-layout":"horizontal","data-source":o.filteredArticulos,locale:{emptyText:" "}},{renderItem:i(({item:u})=>[t(g,null,{default:i(()=>[v("div",ae,[v("div",null,P(u.value),1),t(m,{onClick:n=>o.delectArticulo(u.value)},{icon:i(()=>[t(S)]),_:2},1032,["onClick"])])]),_:2},1024)]),_:1},8,["data-source"])]),t(A,{visible:l.modifica_articulo,"onUpdate:visible":a[2]||(a[2]=u=>l.modifica_articulo=u),title:"修改产品类型","confirm-loading":o.confirmLoading,onOk:o.handleOkArticulo},{default:i(()=>[t(C,{value:l.articulo_name,"onUpdate:value":a[1]||(a[1]=u=>l.articulo_name=u),spellcheck:"false"},{default:i(()=>[E(P(l.$t("name_producto"))+":",1)]),_:1},8,["value"])]),_:1},8,["visible","confirm-loading","onOk"])])}const ie=J(le,[["render",ne]]),ce={components:{PlusOutlined:z,DeleteOutlined:T,SearchOutlined:F,PageArticulo:ie},setup(){const l=V({errorClient:!1,valueClient:"",modifica_articulo:!1,articulo_name:""}),a=L(l),w=q(),o=k(!1),d=k([]),_=k(""),e=V({name:"",direccion:"",nif:"",forma:"",poblation:"",cp:"",telefono:""}),C=()=>{e.name==""&&e.direccion==""&&e.nif==""&&e.forma==""&&e.poblation==""&&e.cp==""&&e.telefono==""?l.errorClient=!0:(l.errorClient=!1,console.log("[PageCliente]submit!",X(e)),u())},f=I(),m=k(!1),S=()=>{m.value=!0,e.name="",e.direccion="",e.nif="",e.forma="",e.poblation="",e.cp="",e.telefono=""},g=()=>{m.value=!1,e.name="",e.direccion="",e.nif="",e.forma="",e.poblation="",e.cp="",e.telefono="",N()},y=()=>{l.modifica_articulo=!l.modifica_articulo},A=()=>{w.back()},u=async()=>{Y();const c={telefono:e.telefono,name:e.name,direccion:e.direccion,poblation:e.poblation,cp:e.cp,nif:e.nif,forma:e.forma};console.log("[PageCliente]bd:",c),f.state.isVisitor?await Z(c):await j("clientes",e.telefono,c),x.success("Submit client success"),g()},n=c=>{$.confirm({title:()=>"Do you want to delete these items?",icon:()=>t(ee),content:()=>"",onOk(){G("clientes",c),oe(Number(c)),N()},onCancel(){}})},h=()=>{d.value=[],console.log("[PageCliente]show client"),f.state.isVisitor?te().then(c=>{c.forEach(O=>{d.value.push({value:O,label:O.name+" ,"+O.telefono})}),console.log("[PageCliente]lista clients:",d.value)}):H("clientes").then(c=>{console.log("[PageCliente]clientes en FireBase:",c),c.forEach(O=>{d.value.push({value:O,label:O.name+" ,"+O.telefono})})}).catch(c=>{console.error("[PageCliente]Error getting data: ",c)})},B=M(()=>_.value?d.value.filter(c=>c.label.includes(_.value)):d.value),s=()=>{console.log("[PageCliente]",l.valueClient)},D=c=>{m.value=!0,e.name=c.name,e.telefono=c.telefono,e.direccion=c.direccion,e.nif=c.nif,e.poblation=c.poblation,e.cp=c.cp},N=()=>{h()};return R(()=>{h()}),{...a,searchString:_,formState:e,onSubmit:C,goBack:A,showDrawer:S,onClose:g,editCliente:D,visible:m,delectCliente:n,clients:d,modificaArticulo:y,handleChange:s,confirmLoading:o,filteredClients:B}}},se=v("br",null,null,-1),re={key:0},ue={key:1},de=v("br",null,null,-1),fe={key:2},me={key:3},_e={key:4},ve={class:"item-row"},pe=["onClick"],be={key:5},Ce={key:0};function ge(l,a,w,o,d,_){const e=r("a-button"),C=r("SearchOutlined"),f=r("a-input"),m=r("PlusOutlined"),S=r("DeleteOutlined"),g=r("a-list-item"),y=r("a-list"),A=r("PageArticulo"),u=r("a-alert"),n=r("a-form-item"),h=r("a-form"),B=r("a-drawer");return p(),b("div",null,[se,l.modifica_articulo?(p(),b("div",ue,[t(e,{onClick:o.modificaArticulo},{default:i(()=>[E(P(l.$t("modifica_cliente")),1)]),_:1},8,["onClick"])])):(p(),b("div",re,[t(e,{onClick:o.modificaArticulo},{default:i(()=>[E(P(l.$t("modifica_articulo")),1)]),_:1},8,["onClick"])])),de,l.modifica_articulo?U("",!0):(p(),b("div",fe,[t(f,{class:"search-input",placeholder:"Search",value:o.searchString,"onUpdate:value":a[0]||(a[0]=s=>o.searchString=s)},{suffix:i(()=>[t(C)]),_:1},8,["value"])])),l.modifica_articulo?U("",!0):(p(),b("div",me,[t(e,{onClick:o.showDrawer,class:"btn-add",type:"text",block:""},{icon:i(()=>[t(m,{style:{"font-size":"20px"}})]),_:1},8,["onClick"])])),l.modifica_articulo?(p(),b("div",be,[t(A)])):(p(),b("div",_e,[t(y,{class:"a-list","item-layout":"horizontal","data-source":o.filteredClients,locale:{emptyText:" "}},{renderItem:i(({item:s})=>[t(g,null,{default:i(()=>[v("div",ve,[v("a",{class:"item-details",onClick:D=>o.editCliente(s.value)},[v("div",null,P(s.value.name)+" , "+P(s.value.telefono),1)],8,pe),t(e,{onClick:D=>o.delectCliente(s.value.telefono)},{icon:i(()=>[t(S)]),_:2},1032,["onClick"])])]),_:2},1024)]),_:1},8,["data-source"])])),t(B,{title:l.$t("cliente"),visible:o.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:o.onClose},{default:i(()=>[l.errorClient?(p(),b("div",Ce,[t(u,{message:"错误",type:"error"})])):U("",!0),t(h,{model:o.formState},{default:i(()=>[t(n,{label:l.$t("name")},{default:i(()=>[t(f,{value:o.formState.name,"onUpdate:value":a[1]||(a[1]=s=>o.formState.name=s),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),t(n,{label:l.$t("telefono")},{default:i(()=>[t(f,{value:o.formState.telefono,"onUpdate:value":a[2]||(a[2]=s=>o.formState.telefono=s),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),t(n,{label:l.$t("direccion")},{default:i(()=>[t(f,{value:o.formState.direccion,"onUpdate:value":a[3]||(a[3]=s=>o.formState.direccion=s),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),t(n,{label:l.$t("poblation")},{default:i(()=>[t(f,{value:o.formState.poblation,"onUpdate:value":a[4]||(a[4]=s=>o.formState.poblation=s),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),t(n,{label:l.$t("nif")},{default:i(()=>[t(f,{value:o.formState.nif,"onUpdate:value":a[5]||(a[5]=s=>o.formState.nif=s),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),t(n,{label:l.$t("cp")},{default:i(()=>[t(f,{value:o.formState.cp,"onUpdate:value":a[6]||(a[6]=s=>o.formState.cp=s),spellcheck:"false"},null,8,["value"])]),_:1},8,["label"]),t(n,{"wrapper-col":{span:14,offset:4}},{default:i(()=>[t(e,{type:"primary",onClick:o.onSubmit},{default:i(()=>[E(P(l.$t("crear")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible","onClose"])])}const ke=J(ce,[["render",ge]]);export{ke as default};
